<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AgeEnt</title>
      
    <!-- Add WebXR specific meta tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    
    <!-- External CSS -->
    <link rel="stylesheet" href="styles.css">
  
    <!-- Import map for ES modules -->
    <script type="importmap">
    {
        "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/",
            "rapier": "https://cdn.jsdelivr.net/npm/@dimforge/rapier2d-simd-compat@0.15.0/rapier.es.min.js"         
        }
    }
    </script>
</head>
<body>
    <!-- Scene container -->
    <div id="scene-container"></div>

    
    <!-- Main application script -->
    <script type="module">
        // Import modules
        import * as SceneManager from '../src/visualization/scene.js';
        import * as UIControls from '../src/ui/controls.js';
        
        // Initialize the application
        async function initApp() {
            try {
                // Initialize UI controls
                UIControls.initControls();

                // Set up simulation start callback
                UIControls.setSimulationStartCallback(async () => {
                    const parameters = UIControls.getParameters();
                    
                    // Initialize scene with current parameters
                    await SceneManager.initScene(parameters);
                });
                
              
                window.stopSimulation = () => {
                    SceneManager.stop();
                };
                
                console.log("Application initialized successfully");
            } catch (error) {
                console.error("Failed to initialize application:", error);
            }
        }
        
        // Start the application when the page loads
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
